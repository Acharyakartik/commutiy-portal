{% extends "html_member/base.html" %}

{% block title %}Member Dashboard{% endblock %}
{% block nav_dashboard %}active{% endblock %}

{% block page_title %}
Dashboard Overview
{% endblock %}

{% block page_subtitle %}
Welcome back, {{ member.first_name|default:"Member" }}
{% endblock %}

{% block content %}

<div class="card card-outline card-secondary">

        <div class="card-header d-flex justify-content-between align-items-center">
            <h3 class="card-title">
                <i class="fas fa-id-card mr-1"></i>
                Select member detail to change
            </h3>

            <a href="{% url 'member:member_detail_add' %}" class="btn btn-sm btn-success">
                <i class="fas fa-plus"></i> Add member detail
            </a>
        </div>

        <div class="card-body table-responsive p-0">
            <table id="detailTable"
                   class="table table-bordered table-striped table-hover text-nowrap m-0 js-data-table"
                   data-page-length="10"
                   data-order-col="9"
                   data-order-dir="desc">

                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Member no</th>
                        <th>First name</th>
                        <th>Surname</th>
                        <th>Date of birth</th>
                        <th>Age</th>
                        <th>Gender</th>
                        <th>Occupation</th>
                        <th>Created by</th>
                        <th>Created at</th>
                        <th>Updated by</th>
                        <th>Updated at</th>
                        <th>Action</th>
                    </tr>
                </thead>

                <tbody>
                {% for d in member_details %}
                    <tr>
                        <td>{{ d.member_id }}</td>
                        <td>{{ d.member_no }}</td>
                        <td>{{ d.first_name }}</td>
                        <td>{{ d.surname }}</td>
                        <td>{{ d.date_of_birth|default:"-" }}</td>
                        <td>{{ d.age }}</td>
                        <td>{{ d.get_gender_display }}</td>
                        <td>{{ d.occupation|default:"-" }}</td>
                        <td>{{ d.created_by.username|default:"System" }}</td>
                        <td>{{ d.created_at|date:"M d, Y, h:i a" }}</td>
                        <td>{{ d.updated_by.username|default:"-" }}</td>
                        <td>{{ d.updated_at|date:"M d, Y, h:i a" }}</td>
                        <td>
                            <a href="{% url 'member:member_detail_edit' d.member_id %}" class="btn btn-sm btn-primary">
                                <i class="fas fa-edit"></i>
                            </a>
                        </td>
                    </tr>
                {% empty %}
                    <tr>
                        <td colspan="13" class="text-center text-muted py-4">
                            No member details found
                        </td>
                    </tr>
                {% endfor %}
                </tbody>

            </table>
        </div>
    </div>
</div>
{% endblock %}